{"componentChunkName":"component---src-templates-post-jsx","path":"/task-4-fruit-store-api/","result":{"data":{"site":{"siteMetadata":{"title":"장태근블로그"}},"markdownRemark":{"id":"2a30fe13-c7e0-51b1-b78d-fa2e6994053e","excerpt":"3, 4일 차 강의에서는 기본적인 데이터베이스 사용법과 데이터베이스를 사용해 API를 만드는 방법을 배웠다. 학습한 내용을 바탕으로 요구사항을 살펴보자. 4일 차 구현과제는 총 3 문제고 각 문제는 이어진다. 요구사항 과일가게에 입고되는 과일정보를 추가한다. 팔린 과일의 정보를 저장한다. 과일이름을 기준으로 팔린 금액, 팔리지 않은 금액을 조회한다. 강의…","html":"<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/b58f159024f761ea6fdf88637070b4a8/64756/inflearn-warmup-club-study.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 65.29411764705883%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7EAAAOxAGVKw4bAAADfUlEQVR42i2TbUybVRiGTxtnFMgUMwmMYSm0paWlK19r6wbzD2ZbNsoUDWSyaCToxC+yLCxuEZdNMzRhlsiCwRmGug+YyRKZbISPQVsGK07EqQsfy5YsbtEfCwmZsLbv5VPxx+l7znnfc/e5r/s5yhwE2wRYJzWM3XNYQ0uYQ5AbH2NgkZFzZeVpl+GReba8KxzX+P4uhCPTBBfvUf87mIMayisfZfUvkFrTyOqkJFLqP8N7PX4wgmsshvPyIrb++9hHlynq+5PC3ls4QhHWjkT58DYMPwxxbek2X8jcMSaC7klYd2KS1YmJbHblcvxEJ2/OQKZUUXDxHs3+dj46egx/51k62tpoOvkjlmCM3CkwtVygvvU7Km6IG9mzyRkVt2KWRX5zN5+Pz1EzJ5aGH2IKLOIc/Bvfnt1s2VnGjiofz23cgK15P+lD13nmh3EyjnSR0nQK41XRGI0JLhGM/5gCGiViM28yhmEYUvtPozvn4bGvq3mk04PqcKCazKhWO+qcCzXoZlXfNizhRTxSaV5Io+jqCmMVh++UhUn8PxvWhBkknXkf1ZuHrsOJbo8RXWU6ulNF6F9KR/+pE1X5FAlddThGNFxXYmRJsIXCOicQRcXF7L13eLl/Hq8EkS2CT3R/gPrSgDrvRZWsQRU/iTpkRRkT0fW4URdzSA58gm1Qggguc0AwvTh8F+PQslj+CdLf3U9h3tOUnr8ptoVHYIaE6p3ozcno3jCib3Gi35qG7mM7un3ZPN5Qg2FgHqu0W8HQAtvCEbKknUxxhkbxXT54h7LWHklJwhmXvgxF/+OR0fUL+rObUf5sdNtTUN8YSfhqHwZbJVb7FgltAVcYDKMabunLTeH/QymSw+ulsuLxGJbRCDZJfZ3Mdx2b5ZWat8ktceO1bqK67i3yDvrJaGjH8NphrEMPcEmV1b9q1P4GVdMiaBOgG2Rz/TVhKTytkppjIkp+aJmKg30cLu+h0fctte9c4tDG49Q1XMZyS6NYei91FI7MLHNp/i+elw7xTcUFRczQPUvG641s7Z4k/+gZ0kq3M31jlh1/iO2BBXIG7kvFERw9N8kdeUDye37KLsxR+jPUTi2xd2qBtcMxTFKcsstmyt4WVrkUL1SUY8/K5GR7G365p5nCxiNcCuRPLfKxZ0LWEuKjuw5QtftVlqIavvA/pAXi127l/v8LJimkxn0jqEsAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='인프런 워밍업 클럽 - 스터디 1기' title='' src='/static/b58f159024f761ea6fdf88637070b4a8/ca1dc/inflearn-warmup-club-study.png' srcset='/static/b58f159024f761ea6fdf88637070b4a8/e7570/inflearn-warmup-club-study.png 170w,\n/static/b58f159024f761ea6fdf88637070b4a8/f46e7/inflearn-warmup-club-study.png 340w,\n/static/b58f159024f761ea6fdf88637070b4a8/ca1dc/inflearn-warmup-club-study.png 680w,\n/static/b58f159024f761ea6fdf88637070b4a8/02d09/inflearn-warmup-club-study.png 1020w,\n/static/b58f159024f761ea6fdf88637070b4a8/64756/inflearn-warmup-club-study.png 1200w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>인프런 워밍업 클럽 - 스터디 1기</figcaption>\n  </figure></p>\n<p>3, 4일 차 강의에서는 기본적인 데이터베이스 사용법과 데이터베이스를 사용해 API를 만드는 방법을 배웠다. 학습한 내용을 바탕으로 요구사항을 살펴보자.</p>\n<blockquote>\n<p>4일 차 구현과제는 총 3 문제고 각 문제는 이어진다.</p>\n</blockquote>\n<h2 id=\"요구사항\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EA%B5%AC%EC%82%AC%ED%95%AD\" aria-label=\"요구사항 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>요구사항</h2>\n<ol>\n<li>과일가게에 입고되는 과일정보를 추가한다.</li>\n<li>팔린 과일의 정보를 저장한다.</li>\n<li>과일이름을 기준으로 팔린 금액, 팔리지 않은 금액을 조회한다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> fruit\n<span class=\"token punctuation\">(</span>\n    id               <span class=\"token keyword\">BIGINT</span> <span class=\"token keyword\">AUTO_INCREMENT</span><span class=\"token punctuation\">,</span>\n    name             <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n    warehousing_date <span class=\"token keyword\">DATE</span>        <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n    price            <span class=\"token keyword\">BIGINT</span>      <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n    is_sold          <span class=\"token keyword\">TINYINT</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>강의에서 다룬 내용을 바탕으로 테이블을 선언한다.</p>\n<blockquote>\n<p>Q. 만약 테이블을 이미 선언했다면 했다면 어떻게 할까?</p>\n</blockquote>\n<p><code class=\"language-text\">ALTER TABLE [테이블명] ADD [컬럼명] [타입] [옵션];</code>과 같은 형식으로 컬럼을 추가한다.</p>\n<h2 id=\"문제-1-과일정보-추가하기\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-1-%EA%B3%BC%EC%9D%BC%EC%A0%95%EB%B3%B4-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"문제 1 과일정보 추가하기 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>문제 1) 과일정보 추가하기</h2>\n<table>\n<thead>\n<tr>\n<th>메서드</th>\n<th>URL</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>POST</td>\n<td>/api/v1/fruit</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"요청\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EC%B2%AD\" aria-label=\"요청 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>요청</h3>\n<table>\n<thead>\n<tr>\n<th>이름</th>\n<th>타입</th>\n<th>설명</th>\n<th>필수</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>name</td>\n<td>String</td>\n<td>과일명</td>\n<td>O</td>\n</tr>\n<tr>\n<td>warehousingDate</td>\n<td>LocalDate</td>\n<td>입고날짜</td>\n<td>O</td>\n</tr>\n<tr>\n<td>price</td>\n<td>long</td>\n<td>가격</td>\n<td>O</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"예제\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%A0%9C\" aria-label=\"예제 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>예제</h3>\n<p><strong>요청</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">http POST :8080/api/v1/fruit <span class=\"token assign-left variable\">name</span><span class=\"token operator\">=</span>사과 <span class=\"token assign-left variable\">warehousingDate</span><span class=\"token operator\">=</span><span class=\"token number\">2024</span>-02-01 <span class=\"token assign-left variable\">price</span><span class=\"token operator\">=</span><span class=\"token number\">5000</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"사과\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"warehousingDate\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2024-02-01\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"price\"</span><span class=\"token operator\">:</span> <span class=\"token number\">5000</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>응답: 성공</strong></p>\n<h3 id=\"해결\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0\" aria-label=\"해결 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>해결</h3>\n<p>1번 문제의 경우 요청형식은 정의되어 있지만 응답은 상태코드를 반환한다. 문제 해결을 위해서 요청 객체(DTO)가 필요하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AddFruitIRequest</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">LocalDate</span> warehousingDate<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">long</span> price<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">AddFruitIRequest</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">LocalDate</span> warehousingDate<span class=\"token punctuation\">,</span> <span class=\"token keyword\">long</span> price<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>warehousingDate <span class=\"token operator\">=</span> warehousingDate<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>price <span class=\"token operator\">=</span> price<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">LocalDate</span> <span class=\"token function\">getWarehousingDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> warehousingDate<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">long</span> <span class=\"token function\">getPrice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> price<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@PostMapping</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">addFruit</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">AddFruitIRequest</span> request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">String</span> sql <span class=\"token operator\">=</span> <span class=\"token string\">\"INSERT INTO fruit (name, warehousing_date, price) VALUES (?, ?, ?)\"</span><span class=\"token punctuation\">;</span>\n    jdbcTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getWarehousingDate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getPrice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>데이터베이스에 데이터를 추가하기 위해서는 DML(Data Manipulation Language) 중 하나인 INSERT 문을 사용한다. 응답형식은 따로 정해져 있지 않아 반환하지 않았다.</p>\n<blockquote>\n<p>Q. 정수를 다루는 대표적인 방법은 int와 long이 있다. 왜 long을 사용했을까?</p>\n</blockquote>\n<p>애플리케이션의 확장을 고려하여 long형식으로 선언했다고 생각한다. 데이터베이스에서 BIGINT 형식으로 테이블을 선언한 것과 같은 이유다.</p>\n<h2 id=\"문제-2-과일정보-수정\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-2-%EA%B3%BC%EC%9D%BC%EC%A0%95%EB%B3%B4-%EC%88%98%EC%A0%95\" aria-label=\"문제 2 과일정보 수정 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>문제 2) 과일정보 수정</h2>\n<table>\n<thead>\n<tr>\n<th>메서드</th>\n<th>URL</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>PUT</td>\n<td>/api/v1/fruit</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"예제-1\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%A0%9C-1\" aria-label=\"예제 1 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>예제</h3>\n<p><strong>요청</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">http PUT :8080/api/v1/fruit <span class=\"token assign-left variable\">id</span><span class=\"token operator\">=</span><span class=\"token number\">3</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>응답: 성공</strong></p>\n<h3 id=\"해결-1\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0-1\" aria-label=\"해결 1 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>해결</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@PutMapping</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">updateFruit</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">UpdateFruitRequest</span> request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">String</span> readSql <span class=\"token operator\">=</span> <span class=\"token string\">\"SELECT * FROM fruit WHERE id = ?\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">boolean</span> isFruitNotExist <span class=\"token operator\">=</span> jdbcTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>readSql<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>rs<span class=\"token punctuation\">,</span> rowNum<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFruitNotExist<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"과일을 찾을 수 없습니다\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token class-name\">String</span> sql <span class=\"token operator\">=</span> <span class=\"token string\">\"UPDATE fruit SET is_sold = 1 WHERE id = ?\"</span><span class=\"token punctuation\">;</span>\n    jdbcTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>가장 애를 먹었다. 컨트롤러는 강의에서 다룬 형식과 같다. 하지만 요청객체 선언은 수정이 필요했다. 기존과 같은 방법으로 선언했을 때는 문제가 해결되지 않았다. 반복적으로 400 Bad Request가 발생했다.</p>\n<blockquote>\n<p>400 상태코드는 클라이언트에서 잘못된 형식으로 요청할 때 발생한다.</p>\n</blockquote>\n<blockquote>\n<p>JSON parse error: Cannot construct instance of</p>\n</blockquote>\n<p>Spring은 직렬화/역직렬화에 Jackson 라이브러리를 사용한다. Jackson은 기본생성자가 없으면 동작하지 않는다.\n총 3가지 방법으로 문제를 해결할 수 있었다.</p>\n<ol>\n<li>기본 생성자를 생성한다: 기본 생성자를 생정하면 <code class=\"language-text\">final</code> 를 사용할 수 없다.</li>\n<li>임의의 필드를 추가한다: 현재는 <code class=\"language-text\">id</code> 필드만 있지만 다른 필드를 추가하면 동작한다.</li>\n<li>방식을 지정한다.</li>\n</ol>\n<p>3번으로 문제를 해결하기 위해서는 Jackson의 동작방식을 알아봤다. Jackson은 두 가지의 방식으로 데이터를 변환한다.</p>\n<ul>\n<li>Properties: 기본적인 변환방식</li>\n<li>Delegating: 복잡한 데이터가 있거나 데이터 처리방법을 변경할 때 사용</li>\n</ul>\n<blockquote>\n<p>필드가 1개인 상태에서 Properties 방식으로 변환하려면 어떻게 해야 할까?</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UpdateFruitRequest</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">long</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@JsonCreator</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">UpdateFruitRequest</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@JsonProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">long</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">long</span> <span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">@JsonCreator</code>, <code class=\"language-text\">@JsonProperty</code> 어노테이션을 사용한다. 두 어노테이션을 사용하면 기본생성자와 setter 없이도 객체를 생성하여 불변객체를 선언할 수 있다.</p>\n<p>2번 문제도 앞선 1번 문제처럼 응답형식이 정해져 있지 않다. 아무것도 반환하지 않는다.</p>\n<h2 id=\"문제-3-과일이름을-기준으로-팔린-금액-팔리지-않는-금액-조회\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-3-%EA%B3%BC%EC%9D%BC%EC%9D%B4%EB%A6%84%EC%9D%84-%EA%B8%B0%EC%A4%80%EC%9C%BC%EB%A1%9C-%ED%8C%94%EB%A6%B0-%EA%B8%88%EC%95%A1-%ED%8C%94%EB%A6%AC%EC%A7%80-%EC%95%8A%EB%8A%94-%EA%B8%88%EC%95%A1-%EC%A1%B0%ED%9A%8C\" aria-label=\"문제 3 과일이름을 기준으로 팔린 금액 팔리지 않는 금액 조회 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>문제 3) 과일이름을 기준으로 팔린 금액, 팔리지 않는 금액 조회</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1. (1, 사과, 3000원, 판매 O)\n2. (2, 사과, 4000원, 판매 X)\n3. (3, 사과, 3000원, 판매 O)</code></pre></div>\n<table>\n<thead>\n<tr>\n<th>메서드</th>\n<th>URL</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>GET</td>\n<td>/api/v1/fruit/stat</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"요청-1\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EC%B2%AD-1\" aria-label=\"요청 1 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>요청</h3>\n<p><strong>쿼리 파라미터</strong></p>\n<table>\n<thead>\n<tr>\n<th>이름</th>\n<th>타입</th>\n<th>설명</th>\n<th>필수</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>name</td>\n<td>String</td>\n<td>과일명</td>\n<td>O</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"예제-2\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%A0%9C-2\" aria-label=\"예제 2 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>예제</h3>\n<p><strong>요청</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">http :8080/api/v1/fruit<span class=\"token punctuation\">\\</span>?name<span class=\"token operator\">=</span>사과</code></pre></div>\n<p><strong>응답: 성공</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"salesAmount\"</span><span class=\"token operator\">:</span> <span class=\"token number\">6000</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"notSalesAmount\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4000</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"해결-2\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0-2\" aria-label=\"해결 2 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>해결</h3>\n<p>3번 문제는 이전 문제들과 다르게 응답형식이 지정되어 있다. 따라서 응답 객체를 선언해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">FruitSalesResponse</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">long</span> salesAmount<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">long</span> notSalesAmount<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">FruitSalesResponse</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">long</span> salesAmount<span class=\"token punctuation\">,</span> <span class=\"token keyword\">long</span> notSalesAmount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>salesAmount <span class=\"token operator\">=</span> salesAmount<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>notSalesAmount <span class=\"token operator\">=</span> notSalesAmount<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">long</span> <span class=\"token function\">getSalesAmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> salesAmount<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">long</span> <span class=\"token function\">getNotSalesAmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> notSalesAmount<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/stat\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">FruitSalesResponse</span> <span class=\"token function\">findByName</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">String</span> sql <span class=\"token operator\">=</span> <span class=\"token string\">\"SELECT SUM(price) FROM fruit WHERE name = ? GROUP BY is_sold\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> salesAmounts <span class=\"token operator\">=</span> jdbcTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>rs<span class=\"token punctuation\">,</span> rowNum<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> rs<span class=\"token punctuation\">.</span><span class=\"token function\">getLong</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Long</span> salesAmount <span class=\"token operator\">=</span> salesAmounts<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Long</span> notSaleAmount <span class=\"token operator\">=</span> salesAmounts<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FruitSalesResponse</span><span class=\"token punctuation\">(</span>salesAmount<span class=\"token punctuation\">,</span> notSaleAmount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>처음부터 SUM, GROUP BY를 사용했다. 이외에는 이전과제와 강의에서 다루는 내용과 일치한다.</p>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>마무리</h2>\n<p>강의가 진행됨에 따라 컨트롤러의 역할이 증가하고 있다. 역할을 분리하는 리팩터링이 필요한 시간이다. 다음 강의와 과제가 기대된다.</p>\n<h3 id=\"함께-자라기\" style=\"position:relative;\"><a href=\"#%ED%95%A8%EA%BB%98-%EC%9E%90%EB%9D%BC%EA%B8%B0\" aria-label=\"함께 자라기 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>함께 자라기</h3>\n<ul>\n<li><a href=\"https://medium.com/daangn/mysql-boolean-%EC%BB%AC%EB%9F%BC-7abd9b35c664\">MySQL BOOLEAN by 당큰 테크 블로그</a></li>\n<li><a href=\"https://yozm.wishket.com/magazine/detail/1519/\">SQL 가독성을 높이는 다섯 가지 사소한 습관</a></li>\n<li><a href=\"https://github.com/FasterXML/jackson\">Jackson by GitHub</a></li>\n</ul>","frontmatter":{"title":"4. 과일가게 API 구현하기","date":"May 03, 2024","update":"May 03, 2024","tags":["Spring"],"series":"인프런 워밍업 클럽 - 스터디 BE 1기"},"fields":{"slug":"/task-4-fruit-store-api/","readingTime":{"minutes":7.86}}},"seriesList":{"edges":[{"node":{"id":"0a76b78c-4a13-559e-af91-44d1d6c12057","fields":{"slug":"/task-1-java-annotation/"},"frontmatter":{"title":"1. 자바 어노테이션"}}},{"node":{"id":"1c4674c9-b98d-5732-ada9-4884c347f256","fields":{"slug":"/task-2-hands-on-rest-api/"},"frontmatter":{"title":"2. API 실습"}}},{"node":{"id":"d55b118e-af67-5463-9e3d-f9b883f66595","fields":{"slug":"/task-3-anonymous-class-and-lambda/"},"frontmatter":{"title":"3. 익명 클래스와 람다"}}},{"node":{"id":"2a30fe13-c7e0-51b1-b78d-fa2e6994053e","fields":{"slug":"/task-4-fruit-store-api/"},"frontmatter":{"title":"4. 과일가게 API 구현하기"}}},{"node":{"id":"f8607518-30ef-5b9e-8129-93bedcc3467c","fields":{"slug":"/task-5-clean-code/"},"frontmatter":{"title":"5. 클린코드 이해하기"}}},{"node":{"id":"82e55aea-477c-5b26-9d7b-b680587a029f","fields":{"slug":"/task-6-spring-container-and-layered-architecture/"},"frontmatter":{"title":"6. 스프링 컨테이너와 계층화 아키텍처(Layered Architecture)"}}},{"node":{"id":"64e199c0-0ee9-5a56-812d-205e87270407","fields":{"slug":"/inflearn-warmup-club-1-240531/"},"frontmatter":{"title":"7. 인프런 워밍업 클럽 스터디 1기 참석 후기"}}}]},"previous":{"fields":{"slug":"/task-3-anonymous-class-and-lambda/"},"frontmatter":{"title":"3. 익명 클래스와 람다"}},"next":{"fields":{"slug":"/task-5-clean-code/"},"frontmatter":{"title":"5. 클린코드 이해하기"}}},"pageContext":{"id":"2a30fe13-c7e0-51b1-b78d-fa2e6994053e","series":"인프런 워밍업 클럽 - 스터디 BE 1기","previousPostId":"d55b118e-af67-5463-9e3d-f9b883f66595","nextPostId":"f8607518-30ef-5b9e-8129-93bedcc3467c"}},"staticQueryHashes":[],"slicesMap":{}}