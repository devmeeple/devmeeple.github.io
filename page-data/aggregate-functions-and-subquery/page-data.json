{"componentChunkName":"component---src-templates-post-jsx","path":"/aggregate-functions-and-subquery/","result":{"data":{"site":{"siteMetadata":{"title":"장태근블로그"}},"markdownRemark":{"id":"c6abac52-f207-50c1-b97a-8f262443d320","excerpt":"이 글은 MySQL을 기준으로 작성됐다. 데이터베이스마다 사용법은 다를 수 있다. 1. 집계함수 집계함수란 무엇인가? 어떤것이 있는가? 집계함수의 예시와 사용 집합 그림 집계 함수는 값 집합을 계산하고 단일 값을 반환한다. 일반적인 함수는 인수로 하나의 값을 지정하는데 반해 집계함수는 집합을 지정한다. \n따라서 집합 함수라고 부르기도 한다. 흔히 데이터의…","html":"<blockquote>\n<p>이 글은 MySQL을 기준으로 작성됐다. 데이터베이스마다 사용법은 다를 수 있다.</p>\n</blockquote>\n<h2 id=\"1-집계함수\" style=\"position:relative;\"><a href=\"#1-%EC%A7%91%EA%B3%84%ED%95%A8%EC%88%98\" aria-label=\"1 집계함수 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>1. 집계함수</h2>\n<ul>\n<li>집계함수란 무엇인가? 어떤것이 있는가?</li>\n<li>집계함수의 예시와 사용</li>\n</ul>\n<p>집합 그림</p>\n<p>집계 함수는 값 집합을 계산하고 단일 값을 반환한다. 일반적인 함수는 인수로 하나의 값을 지정하는데 반해 집계함수는 집합을 지정한다.\n따라서 집합 함수라고 부르기도 한다. 흔히 데이터의 개수, 최댓값, 최솟값, 평균, 합계등을 계산하는데 사용한다.</p>\n<p>SQL을 다룰 때 NULL 값을 주의해야 한다.</p>\n<h3 id=\"11-COUNT---행의-개수-구하기\" style=\"position:relative;\"><a href=\"#11-COUNT---%ED%96%89%EC%9D%98-%EA%B0%9C%EC%88%98-%EA%B5%AC%ED%95%98%EA%B8%B0\" aria-label=\"11 COUNT   행의 개수 구하기 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>1.1 COUNT - 행의 개수 구하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span>aggregate_expression<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">FROM</span> <span class=\"token keyword\">tables</span>\n<span class=\"token punctuation\">[</span><span class=\"token keyword\">WHERE</span> conditions<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> expression <span class=\"token punctuation\">[</span> <span class=\"token keyword\">ASC</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">DESC</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>COUNT는 행의 개수를 구하는데 사용한다. COUNT 함수의 결과는 NULL이 아닌 값만 출력된다.</p>\n<p>NULL 예시</p>\n<h3 id=\"12-SUM---합계-구하기\" style=\"position:relative;\"><a href=\"#12-SUM---%ED%95%A9%EA%B3%84-%EA%B5%AC%ED%95%98%EA%B8%B0\" aria-label=\"12 SUM   합계 구하기 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>1.2 SUM - 합계 구하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token function\">SUM</span><span class=\"token punctuation\">(</span>aggregate_expression<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">FROM</span> <span class=\"token keyword\">tables</span>\n<span class=\"token punctuation\">[</span><span class=\"token keyword\">WHERE</span> conditions<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>합계를 구하는데 사용한다.</p>\n<h3 id=\"13-AVG---평균-구하기\" style=\"position:relative;\"><a href=\"#13-AVG---%ED%8F%89%EA%B7%A0-%EA%B5%AC%ED%95%98%EA%B8%B0\" aria-label=\"13 AVG   평균 구하기 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>1.3 AVG - 평균 구하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token function\">AVG</span><span class=\"token punctuation\">(</span>aggregate_expression<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">FROM</span> <span class=\"token keyword\">tables</span>\n<span class=\"token punctuation\">[</span><span class=\"token keyword\">WHERE</span> conditions<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>평균을 구하는데 사용한다. </p>\n<ul>\n<li>NULL 값을 제거한 뒤에 평균을 구하기 위해서는?</li>\n</ul>\n<h3 id=\"14-MAX---최댓값-구하기\" style=\"position:relative;\"><a href=\"#14-MAX---%EC%B5%9C%EB%8C%93%EA%B0%92-%EA%B5%AC%ED%95%98%EA%B8%B0\" aria-label=\"14 MAX   최댓값 구하기 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>1.4 MAX - 최댓값 구하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token function\">MAX</span><span class=\"token punctuation\">(</span>aggregate_expression<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">FROM</span> talbes\n<span class=\"token punctuation\">[</span><span class=\"token keyword\">WHERE</span> conditions<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"15-MIN---최솟값-구하기\" style=\"position:relative;\"><a href=\"#15-MIN---%EC%B5%9C%EC%86%9F%EA%B0%92-%EA%B5%AC%ED%95%98%EA%B8%B0\" aria-label=\"15 MIN   최솟값 구하기 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>1.5 MIN - 최솟값 구하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token function\">MIN</span><span class=\"token punctuation\">(</span>aggregate_expression<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">FROM</span> talbes\n<span class=\"token punctuation\">[</span><span class=\"token keyword\">WHERE</span> conditions<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"16-GROUP-BY---그룹화\" style=\"position:relative;\"><a href=\"#16-GROUP-BY---%EA%B7%B8%EB%A3%B9%ED%99%94\" aria-label=\"16 GROUP BY   그룹화 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>1.6 GROUP BY - 그룹화</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> expression1<span class=\"token punctuation\">,</span> expression2<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>expression_n<span class=\"token punctuation\">,</span>\n       aggregate_function <span class=\"token punctuation\">(</span>aggregate_expression<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">FROM</span> <span class=\"token keyword\">tables</span>\n<span class=\"token punctuation\">[</span><span class=\"token keyword\">WHERE</span> conditions<span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> expression1<span class=\"token punctuation\">,</span> expression2<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> expression_n\n<span class=\"token punctuation\">[</span><span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> expression <span class=\"token punctuation\">[</span> <span class=\"token keyword\">ASC</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">DESC</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>그룹화란 데이터를 그룹 단위로 묶어 집계함수를 적용하는 방법이다. 특정 기준에 따라 데이터를 분류하고, 그룹별로 계산 결과를 얻을 수 있다.</p>\n<p>예를들어 점포별, 상품별, 월별, 일별 등 기준에 따라 집계할 때 사용한다.</p>\n<p>만약 GROUP BY에 지정한 열 이외에 열을 SELECT 구에 지정하면 에러가 발생한다. 집계함수는 그룹당 하나의 행을 반환하다. 하지만 이외에 열을 지정하면 데이터베이스는 혼란스럽다. 따라서 에러가 발생한다.</p>\n<p><strong>Q. 중복을 제거하는 DISTINCT와 같은거 아닌가요?</strong></p>\n<p>두 가지 방법 모두 중복을 제거하는데 사용할 수 있지만 GROUP BY 절은 집계함수와 함께 사용한다.</p>\n<h3 id=\"17-HAVING---조건-지정\" style=\"position:relative;\"><a href=\"#17-HAVING---%EC%A1%B0%EA%B1%B4-%EC%A7%80%EC%A0%95\" aria-label=\"17 HAVING   조건 지정 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>1.7 HAVING - 조건 지정</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> expression1<span class=\"token punctuation\">,</span> expression2<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> expression_n<span class=\"token punctuation\">,</span>\n    aggregate_function <span class=\"token punctuation\">(</span>aggregate_expression<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">FROM</span> <span class=\"token keyword\">tables</span>\n<span class=\"token punctuation\">[</span><span class=\"token keyword\">WHERE</span> conditions<span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> expression1<span class=\"token punctuation\">,</span> expression2<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> expression_n\n<span class=\"token keyword\">HAVING</span> condition</code></pre></div>\n<p>그룹화된 데이터의 조건을 지정할 때 사용한다. 앞서 배운 WHERE 절은 개별 레코드에 필터링을 수행하는 반면, HAVING 절은 그룹화된 데이터를 필터링 한다.</p>\n<p>WHERE 절과 비슷한 방법으로 사용가능하지만 HAVING 절은 집계함수와 함께 사용한다.</p>\n<blockquote>\n<p><strong>내부처리 순서</strong></p>\n<p>WHERE -> GROUP BY -> HAVING -> SELECT -> ORDER BY</p>\n</blockquote>\n<h3 id=\"함께-사용하는-함수\" style=\"position:relative;\"><a href=\"#%ED%95%A8%EA%BB%98-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%ED%95%A8%EC%88%98\" aria-label=\"함께 사용하는 함수 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>함께 사용하는 함수</h3>\n<p><strong>1. DISTINCT<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup></strong>: 중복 값을 제거하는 함수, NULL 값을 무시하지 않는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">DISTINCT</span> expressions\n<span class=\"token keyword\">FROM</span> <span class=\"token keyword\">tables</span>\n<span class=\"token punctuation\">[</span><span class=\"token keyword\">WHERE</span> conditions<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"집계함수와-함께-춤을\" style=\"position:relative;\"><a href=\"#%EC%A7%91%EA%B3%84%ED%95%A8%EC%88%98%EC%99%80-%ED%95%A8%EA%BB%98-%EC%B6%A4%EC%9D%84\" aria-label=\"집계함수와 함께 춤을 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>집계함수와 함께 춤을</h3>\n<p>예제와 실제 사용사례, 문제</p>\n<h2 id=\"2-서브쿼리Subquery\" style=\"position:relative;\"><a href=\"#2-%EC%84%9C%EB%B8%8C%EC%BF%BC%EB%A6%ACSubquery\" aria-label=\"2 서브쿼리Subquery permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>2. 서브쿼리(Subquery)</h2>\n<ul>\n<li>서브쿼리 정의</li>\n<li>서브쿼리 사용방법</li>\n<li>서브쿼리 패턴(하나의 값, 복수의 행이지만 열은 하나, 하나의 행이 반환되지만 열이 복수, 복수의 행, 복수의 열 반환)</li>\n</ul>\n<p>서브쿼리란 쿼리안에 또 다른 쿼리를 선언하는 방법을 의미한다. 서브쿼리는 WHERE, FROM, SELECT 절 등 어느절에서든 사용가능하다. 특히 WHERE 절에서 주로 사용한다.</p>\n<p>MySQL에서는 서브쿼리를 INNER QUERY 또는 INNER SELECT 라고 한다.</p>\n<p>서브쿼리를 먼저 실행하고, DELETE 명령을 실행한다.</p>\n<h3 id=\"스칼라Scalar\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%EC%B9%BC%EB%9D%BCScalar\" aria-label=\"스칼라Scalar permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>스칼라(Scalar)</h3>\n<p>'스칼라 값'이란 '단일 값'을 반환하는 서브쿼리를 의미한다. 스칼라 값을 다른 서브쿼리 패턴들 중 사용하기 쉬운 장점을 가진다.</p>\n<h2 id=\"상관-서브쿼리\" style=\"position:relative;\"><a href=\"#%EC%83%81%EA%B4%80-%EC%84%9C%EB%B8%8C%EC%BF%BC%EB%A6%AC\" aria-label=\"상관 서브쿼리 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>상관 서브쿼리</h2>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>마무리</h2>\n<p>책을 읽을 때마다 몰랐던 수학용어를 마주할 수 있어서 반갑다. 예를 들어 최근에 파라미터가 그렇듯이 이번에는 서브쿼리 중 스칼라에 대해 배울 수 있어서 재밌었다. (사용하면서 전혀 수학용어라고 생각하지 못했다.)</p>\n<p>이번장은 특히 이전에 집계함수와 그룹화를 이해하지 못해서 쿼리작성 시 동일한 오류를 마주했던 경험이 있어 더욱 주의 깊게 살펴보고 정리했다.</p>\n<p>채용공고에서 자주 이야기하는 개념 중 서브쿼리가 있는데, 개념 외에 실제 사용하면서 얻는 인사이트와 접목이 필요하다. 기존에 풀었던 문제를 서브쿼리로 개선할 수 없을지 고민해 보자.</p>\n<p><strong>&#x3C;참고자료></strong></p>\n<ol>\n<li>『SQL 첫걸음』(아사이 아츠시, 한빛미디어, 2015)</li>\n<li><a href=\"https://www.techonthenet.com/index.php\">TechOnTheNet 'SQL Tutorial'</a></li>\n<li><a href=\"https://wikidocs.net/book/13790\">위키독스 'AI가 알려주는 SQL - 아직 AI가 알아서 못하는 DB 관리'</a></li>\n</ol>\n\n      <div class=\"footnotes\">\n        \n        <ol >\n    \n    <li class=\"footnote-list-item\" id=\"fn-1\" >\n          \n        <p class=\"footnote-paragraph\" style=\"display:inline; \">별개의, 구별되는</p>\n      <a href=\"#fnref-1\" class=\"footnote-backref\" style=\"display:inline;text-decoration: none;\">\n        ↩\n      </a>\n    \n      </li>\n      \n    </ol></div>","frontmatter":{"title":"집계와 서브쿼리","date":"July 06, 2024","update":null,"tags":["Database"],"series":null},"fields":{"slug":"/aggregate-functions-and-subquery/","readingTime":{"minutes":6.51}}},"seriesList":{"edges":[{"node":{"id":"bd148f97-8f41-53bf-a3e1-cab1829c3cee","fields":{"slug":"/retrospective-20230428/"},"frontmatter":{"title":"4월호 ｢타협하고 후퇴하지 마라｣"}}},{"node":{"id":"90c58c87-ae91-5d78-9f42-8a9bbeaec3f4","fields":{"slug":"/intellij-code-convention/"},"frontmatter":{"title":"IntelliJ Code convention 적용하기"}}},{"node":{"id":"b3bbe318-e4e0-5de9-ba21-9649b236a0a9","fields":{"slug":"/changing-a-commit-message/"},"frontmatter":{"title":"Git 이전커밋 메시지 수정하기"}}},{"node":{"id":"7b0ad103-849e-546d-9c99-e4a40d330252","fields":{"slug":"/joy-of-learning/"},"frontmatter":{"title":"히로나카 헤이스케, 『학문의 즐거움』"}}},{"node":{"id":"43e6b087-af89-5d74-95eb-05ce100b6ace","fields":{"slug":"/infcon-2024-guide/"},"frontmatter":{"title":"INFCON 2024 가이드"}}},{"node":{"id":"c6abac52-f207-50c1-b97a-8f262443d320","fields":{"slug":"/aggregate-functions-and-subquery/"},"frontmatter":{"title":"집계와 서브쿼리"}}}]},"previous":{"fields":{"slug":"/infcon-2024-guide/"},"frontmatter":{"title":"INFCON 2024 가이드"}},"next":null},"pageContext":{"id":"c6abac52-f207-50c1-b97a-8f262443d320","series":null,"previousPostId":"43e6b087-af89-5d74-95eb-05ce100b6ace","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}