{"componentChunkName":"component---src-templates-post-jsx","path":"/sql-first-step-4/","result":{"data":{"site":{"siteMetadata":{"title":"장태근블로그"}},"markdownRemark":{"id":"6903fb09-a5fa-53aa-9a5d-b8f4d98882a8","excerpt":"이번장에서는 DML에 해당되는 INSERT, DELETE, UPDATE를 배우고 논리삭제와 물리삭제의 차이를 다룬다. 추가하기 - INSERT INSERT는 데이터를 추가할 때 사용한다. 예를 들어 회원가입, 상품추가등에 사용된다. 이전에 배운 SELECT는 서버에서 데이터를 조회하고 결과를 반환했다. (서버 -> 클라이언트) INSERT는 클라이언트에서…","html":"<p>이번장에서는 DML에 해당되는 INSERT, DELETE, UPDATE를 배우고 논리삭제와 물리삭제의 차이를 다룬다.</p>\n<h2 id=\"추가하기---INSERT\" style=\"position:relative;\"><a href=\"#%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0---INSERT\" aria-label=\"추가하기   INSERT permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>추가하기 - INSERT</h2>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> 테이블명\n<span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span>값<span class=\"token number\">1</span><span class=\"token punctuation\">,</span> 값<span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>INSERT는 데이터를 추가할 때 사용한다. 예를 들어 회원가입, 상품추가등에 사용된다.</p>\n<ul>\n<li>이전에 배운 SELECT는 서버에서 데이터를 조회하고 결과를 반환했다. (서버 -> 클라이언트)</li>\n<li>INSERT는 클라이언트에서 서버로 전송되므로 결과를 반환받지 않는다.</li>\n</ul>\n<p>데이터를 추가할 때 전체 열에 값을 추가할수도 있지만 열을 지정할 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> 테이블명 <span class=\"token punctuation\">(</span>열<span class=\"token number\">1</span><span class=\"token punctuation\">,</span> 열<span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span>값<span class=\"token number\">1</span><span class=\"token punctuation\">,</span> 값<span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>데이터를 추가할 때 몇 가지 주의점이 있다.</p>\n<ol>\n<li>해당 열의 데이터 형식에 맞는 값을 지정한다.</li>\n<li>제약조건(DEFAULT, NOT NULL 등)</li>\n</ol>\n<blockquote>\n<p>앞서 여러 번 다뤘지만 NULL을 다룰 땐 특별히 주의가 필요하다.</p>\n</blockquote>\n<h2 id=\"삭제하기---DELETE\" style=\"position:relative;\"><a href=\"#%EC%82%AD%EC%A0%9C%ED%95%98%EA%B8%B0---DELETE\" aria-label=\"삭제하기   DELETE permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>삭제하기 - DELETE</h2>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">DELETE</span>\n<span class=\"token keyword\">FROM</span> 테이블명\n<span class=\"token keyword\">WHERE</span> 조건식</code></pre></div>\n<p>DELETE는 데이터를 삭제한다. 조건식은 생략이 가능한데 생략 시 모든 행을 대상으로 동작한다. 만약 운영 중인 서비스에서 고객의 데이터 전체를 삭제하면 어떨까? 상상만 해도 등골이 오싹해진다.\n따라서 의도한 데이터만 삭제할 수 있도록 조건식 지정을 습관화하자.</p>\n<h2 id=\"갱신하기---UPDATE\" style=\"position:relative;\"><a href=\"#%EA%B0%B1%EC%8B%A0%ED%95%98%EA%B8%B0---UPDATE\" aria-label=\"갱신하기   UPDATE permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>갱신하기 - UPDATE</h2>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">UPDATE</span> 테이블명\n<span class=\"token keyword\">SET</span> 열<span class=\"token number\">1</span> <span class=\"token operator\">=</span> 값<span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    열<span class=\"token number\">2</span> <span class=\"token operator\">=</span> 값<span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">WHERE</span> 조건식</code></pre></div>\n<p>UPDATE는 데이터를 갱신할 때 사용한다. 앞서 다룬 DELETE처럼 조건식 생략이 가능하다. 하지만 모든 행이 갱신된다.</p>\n<blockquote>\n<p>DELETE, UPDATE와 같은 데이터 수정 작업은 더욱 주의가 필요하다. 의도에 맞게 동작할 수 있도록 명령을 작성하자.</p>\n</blockquote>\n<h2 id=\"물리삭제와-논리삭제\" style=\"position:relative;\"><a href=\"#%EB%AC%BC%EB%A6%AC%EC%82%AD%EC%A0%9C%EC%99%80-%EB%85%BC%EB%A6%AC%EC%82%AD%EC%A0%9C\" aria-label=\"물리삭제와 논리삭제 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>물리삭제와 논리삭제</h2>\n<p>물리삭제와 논리삭제는 데이터를 삭제하는 2가지 방법을 의미한다. 정답이 없고 비즈니스 요구사항에 맞춰 상황에 따라 선택해야 한다.</p>\n<h3 id=\"물리삭제Hard-delete\" style=\"position:relative;\"><a href=\"#%EB%AC%BC%EB%A6%AC%EC%82%AD%EC%A0%9CHard-delete\" aria-label=\"물리삭제Hard delete permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>물리삭제(Hard delete)</h3>\n<ul>\n<li>DELETE 명령을 사용해 데이터를 완전히 삭제한다.</li>\n</ul>\n<h3 id=\"논리삭제Soft-delete\" style=\"position:relative;\"><a href=\"#%EB%85%BC%EB%A6%AC%EC%82%AD%EC%A0%9CSoft-delete\" aria-label=\"논리삭제Soft delete permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>논리삭제(Soft delete)</h3>\n<ul>\n<li>데이터가 삭제된 것처럼 표시하는 삭제 방법</li>\n<li>실제 데이터를 삭제하지 않고 삭제 플래그를 추가하여 상태를 변경한다.</li>\n<li>휴지통을 예시로 생각하면 편하다. 삭제한 파일이 휴지통으로 가고 완전히 삭제하면 복구할 수 없다.</li>\n</ul>\n<h2 id=\"마치며\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>마치며</h2>\n<p>논리삭제와, 물리삭제의 개념을 정리할 때 어려웠다. 책에서 설명하는 개념 외에 어떤 표현을 사용해야 이후에 자료를 접해도 기억할 수 있을까라는 관점에서 의문이 들었다. 그런데 파일 삭제를 예시로 떠올리니 쉽게\n이해할 수 있었다.</p>\n<ul>\n<li>논리삭제: 삭제한 파일은 휴지통으로 간다. (플래그를 수정한다)</li>\n<li>물리삭제: 휴지통에 보관된 파일을 삭제하여 완전히 삭제한다.</li>\n</ul>\n<p>물론 물리삭제와, 논리삭제가 데이터베이스에서 학습한 개념이기에 적절한 예제가 아닐 수 있다. 파일의 상태가 클라이언트에게 보여도 괜찮은가라는 의문이 있었는데 논리삭제의 개념과 빗대어 생각해 봤을 때 별다른 문제가\n없었다. 이렇게 이해가 잘 되지 않을 땐 일상의 개념과 접목해서 연상하는 것도 괜찮은 방법이라고 느껴 재밌었다.</p>","frontmatter":{"title":"[SQL 첫걸음] 4장. 데이터 추가, 삭제, 갱신","date":"June 13, 2024","update":"June 13, 2024","tags":["Database"],"series":"SQL 첫걸음"},"fields":{"slug":"/sql-first-step-4/","readingTime":{"minutes":4.805}}},"seriesList":{"edges":[{"node":{"id":"8691f202-16e3-553d-9802-954ec5e9a453","fields":{"slug":"/sql-first-step-1/"},"frontmatter":{"title":"[SQL 첫걸음] 1장. 데이터베이스와 SQL"}}},{"node":{"id":"c804ace8-24e3-5720-94ea-5949596ab943","fields":{"slug":"/sql-first-step-2/"},"frontmatter":{"title":"[SQL 첫걸음] 2장. 테이블에서 데이터 검색"}}},{"node":{"id":"76d5d184-f2a6-58e9-85f9-8bf8722f1ae1","fields":{"slug":"/sql-first-step-3/"},"frontmatter":{"title":"[SQL 첫걸음] 3장. 정렬과 연산"}}},{"node":{"id":"6903fb09-a5fa-53aa-9a5d-b8f4d98882a8","fields":{"slug":"/sql-first-step-4/"},"frontmatter":{"title":"[SQL 첫걸음] 4장. 데이터 추가, 삭제, 갱신"}}}]},"previous":{"fields":{"slug":"/joy-of-learning/"},"frontmatter":{"title":"히로나카 헤이스케, 『학문의 즐거움』"}},"next":{"fields":{"slug":"/retrospective-20240630/"},"frontmatter":{"title":"월간 회고 6월호 - Stop Crying Your Heart Out"}}},"pageContext":{"id":"6903fb09-a5fa-53aa-9a5d-b8f4d98882a8","series":"SQL 첫걸음","previousPostId":"7b0ad103-849e-546d-9c99-e4a40d330252","nextPostId":"67fd4e05-41a9-5740-b320-4935dbd97305"}},"staticQueryHashes":[],"slicesMap":{}}